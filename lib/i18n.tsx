'use client';

import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';

export type Language = 'en' | 'es' | 'fr' | 'de' | 'pl' | 'no' | 'ja';

export const LANGUAGES: { [key in Language]: string } = {
  en: 'English',
  es: 'Español',
  fr: 'Français',
  de: 'Deutsch',
  pl: 'Polski',
  no: 'Norsk',
  ja: '日本語',
};

type TranslationKey =
  | 'appSettings'
  | 'defaultSessionLength'
  | 'minutes'
  | 'save'
  | 'defaultTone'
  | 'defaultStartFrequency'
  | 'hz'
  | 'selectFromPresets'
  | 'addCustomFrequency'
  | 'label'
  | 'add'
  | 'binauralAlwaysOn'
  | 'visualizerStyle'
  | 'cymaticRing'
  | 'classicWaveform'
  | 'lissajousCurve'
  | 'visualizerColor'
  | 'closeSettings'
  | 'binaural'
  | 'initializing'
  | 'startSession'
  | 'settings'
  | 'frequencies'
  | 'tone'
  | 'sessionTimer'
  | 'enableTimer'
  | 'customMinutes'
  | 'sequenceBuilder'
  | 'loadTemplate'
  | 'saveAsTemplate'
  | 'nameRequired'
  | 'descriptionOptional'
  | 'cancel'
  | 'hide'
  | 'painRelief'
  | 'healing'
  | 'liberation'
  | 'change'
  | 'miracles'
  | 'connection'
  | 'expression'
  | 'intuition'
  | 'crown'
  | 'earth'
  | 'gamma'
  | 'cosmicOm'
  | 'verdiA'
  | 'deepSleep'
  | 'meditation'
  | 'relaxation'
  | 'focus'
  | 'peakAwareness'
  | 'healingPad'
  | 'pureSine'
  | 'warmString'
  | 'templeDrone'
  | 'deepOm'
  | 'customHz'
  | 'set'
  | 'binauralEntrainment'
  | 'createSequence'
  | 'remaining'
  | 'frequenciesCount'
  | 'buildSequence'
  | 'sequence'
  | 'total'
  | 'autoDistributeTime'
  | 'minutesTotal'
  | 'distribute'
  | 'secPerFrequency'
  | 'seconds'
  | 'sec'
  | 'addToSequence'
  | 'startSequence'
  | 'addFrequenciesToSequence'
  | 'solfeggio'
  | 'rose'
  | 'special'
  | 'microphoneInput'
  | 'tapToExpand'
  | 'enableMicrophone'
  | 'inputDevice'
  | 'gain'
  | 'language';

const translations: { [key in Language]: { [key in TranslationKey]: string } } = {
  en: {
    appSettings: 'App Settings',
    defaultSessionLength: 'Default Session Length',
    minutes: 'Minutes',
    save: 'Save',
    defaultTone: 'Default Tone',
    defaultStartFrequency: 'Default START Frequency',
    hz: 'Hz',
    selectFromPresets: 'Select from Presets',
    addCustomFrequency: 'Add Custom Frequency to Special',
    label: 'Label',
    add: 'Add',
    binauralAlwaysOn: 'Binaural Always On',
    visualizerStyle: 'Visualizer Style',
    cymaticRing: 'Cymatic Ring',
    classicWaveform: 'Classic Waveform',
    lissajousCurve: 'Lissajous Curve',
    visualizerColor: 'Visualizer Color',
    closeSettings: 'Close Settings',
    binaural: 'BINAURAL',
    initializing: 'Initializing...',
    startSession: 'Start Session',
    settings: 'Settings',
    frequencies: 'Frequencies',
    tone: 'Tone',
    sessionTimer: 'Session Timer',
    enableTimer: 'Enable Timer',
    customMinutes: 'Custom minutes',
    sequenceBuilder: 'Sequence Builder',
    loadTemplate: 'Load Template...',
    saveAsTemplate: 'Save as Template',
    nameRequired: 'Name (required)',
    descriptionOptional: 'Description (optional)',
    cancel: 'Cancel',
    hide: 'Hide ↓',
    painRelief: 'Pain Relief',
    healing: 'Healing',
    liberation: 'Liberation',
    change: 'Change',
    miracles: 'Miracles',
    connection: 'Connection',
    expression: 'Expression',
    intuition: 'Intuition',
    crown: 'Crown',
    earth: 'Earth',
    gamma: 'Gamma',
    cosmicOm: 'Cosmic Om',
    verdiA: 'Verdi A',
    deepSleep: 'Deep Sleep',
    meditation: 'Meditation',
    relaxation: 'Relaxation',
    focus: 'Focus',
    peakAwareness: 'Peak Awareness',
    healingPad: 'Healing Pad',
    pureSine: 'Pure Sine',
    warmString: 'Warm String',
    templeDrone: 'Temple Drone',
    deepOm: 'Deep Om',
    customHz: 'Custom Hz',
    set: 'Set',
    binauralEntrainment: 'Binaural Entrainment',
    createSequence: 'Create a Sequence',
    remaining: 'remaining',
    frequenciesCount: 'frequencies',
    buildSequence: 'Build a sequence',
    sequence: 'Sequence',
    total: 'total',
    autoDistributeTime: 'Auto-distribute time',
    minutesTotal: 'minutes total',
    distribute: 'Distribute',
    secPerFrequency: 'sec per frequency',
    seconds: 'seconds',
    sec: 'sec',
    addToSequence: 'Add to sequence',
    startSequence: 'Start Sequence',
    addFrequenciesToSequence: 'Add frequencies to your sequence',
    solfeggio: 'Solfeggio',
    rose: 'Rose',
    special: 'Special',
    microphoneInput: 'Microphone Input',
    tapToExpand: 'Tap to expand',
    enableMicrophone: 'Enable Microphone',
    inputDevice: 'Input Device',
    gain: 'Gain',
    language: 'Language',
  },
  es: {
    appSettings: 'Configuración',
    defaultSessionLength: 'Duración predeterminada',
    minutes: 'Minutos',
    save: 'Guardar',
    defaultTone: 'Tono predeterminado',
    defaultStartFrequency: 'Frecuencia INICIAL predeterminada',
    hz: 'Hz',
    selectFromPresets: 'Seleccionar de preajustes',
    addCustomFrequency: 'Añadir frecuencia personalizada',
    label: 'Etiqueta',
    add: 'Añadir',
    binauralAlwaysOn: 'Binaural siempre activo',
    visualizerStyle: 'Estilo de visualizador',
    cymaticRing: 'Anillo Cimático',
    classicWaveform: 'Onda Clásica',
    lissajousCurve: 'Curva de Lissajous',
    visualizerColor: 'Color del visualizador',
    closeSettings: 'Cerrar configuración',
    binaural: 'BINAURAL',
    initializing: 'Iniciando...',
    startSession: 'Iniciar sesión',
    settings: 'Ajustes',
    frequencies: 'Frecuencias',
    tone: 'Tono',
    sessionTimer: 'Temporizador',
    enableTimer: 'Activar temporizador',
    customMinutes: 'Minutos personalizados',
    sequenceBuilder: 'Constructor de secuencias',
    loadTemplate: 'Cargar plantilla...',
    saveAsTemplate: 'Guardar como plantilla',
    nameRequired: 'Nombre (requerido)',
    descriptionOptional: 'Descripción (opcional)',
    cancel: 'Cancelar',
    hide: 'Ocultar ↓',
    painRelief: 'Alivio del dolor',
    healing: 'Curación',
    liberation: 'Liberación',
    change: 'Cambio',
    miracles: 'Milagros',
    connection: 'Conexión',
    expression: 'Expresión',
    intuition: 'Intuición',
    crown: 'Corona',
    earth: 'Tierra',
    gamma: 'Gamma',
    cosmicOm: 'Om Cósmico',
    verdiA: 'Verdi A',
    deepSleep: 'Sueño profundo',
    meditation: 'Meditación',
    relaxation: 'Relajación',
    focus: 'Enfoque',
    peakAwareness: 'Conciencia plena',
    healingPad: 'Pad Curativo',
    pureSine: 'Seno Puro',
    warmString: 'Cuerda Cálida',
    templeDrone: 'Dron del Templo',
    deepOm: 'Om Profundo',
    customHz: 'Hz Personalizado',
    set: 'Fijar',
    binauralEntrainment: 'Arrastre Binaural',
    createSequence: 'Crear una secuencia',
    remaining: 'restante',
    frequenciesCount: 'frecuencias',
    buildSequence: 'Construir secuencia',
    sequence: 'Secuencia',
    total: 'total',
    autoDistributeTime: 'Distribuir tiempo auto.',
    minutesTotal: 'minutos total',
    distribute: 'Distribuir',
    secPerFrequency: 'seg por frecuencia',
    seconds: 'segundos',
    sec: 'seg',
    addToSequence: 'Añadir a secuencia',
    startSequence: 'Iniciar Secuencia',
    addFrequenciesToSequence: 'Añade frecuencias a tu secuencia',
    solfeggio: 'Solfeggio',
    rose: 'Rose',
    special: 'Especial',
    microphoneInput: 'Entrada de Micrófono',
    tapToExpand: 'Toque para expandir',
    enableMicrophone: 'Activar micrófono',
    inputDevice: 'Dispositivo de entrada',
    gain: 'Ganancia',
    language: 'Idioma',
  },
  fr: {
    appSettings: 'Paramètres',
    defaultSessionLength: 'Durée de session par défaut',
    minutes: 'Minutes',
    save: 'Enregistrer',
    defaultTone: 'Tonalité par défaut',
    defaultStartFrequency: 'Fréquence de DÉPART par défaut',
    hz: 'Hz',
    selectFromPresets: 'Choisir parmi les préréglages',
    addCustomFrequency: 'Ajouter une fréquence personnalisée',
    label: 'Libellé',
    add: 'Ajouter',
    binauralAlwaysOn: 'Binaural toujours actif',
    visualizerStyle: 'Style du visualiseur',
    cymaticRing: 'Anneau Cymatique',
    classicWaveform: 'Onde Classique',
    lissajousCurve: 'Courbe de Lissajous',
    visualizerColor: 'Couleur du visualiseur',
    closeSettings: 'Fermer les paramètres',
    binaural: 'BINAURAL',
    initializing: 'Initialisation...',
    startSession: 'Démarrer la session',
    settings: 'Réglages',
    frequencies: 'Fréquences',
    tone: 'Tonalité',
    sessionTimer: 'Minuteur',
    enableTimer: 'Activer le minuteur',
    customMinutes: 'Minutes personnalisées',
    sequenceBuilder: 'Créateur de séquence',
    loadTemplate: 'Charger un modèle...',
    saveAsTemplate: 'Enregistrer comme modèle',
    nameRequired: 'Nom (requis)',
    descriptionOptional: 'Description (optionnel)',
    cancel: 'Annuler',
    hide: 'Masquer ↓',
    painRelief: 'Soulagement',
    healing: 'Guérison',
    liberation: 'Libération',
    change: 'Changement',
    miracles: 'Miracles',
    connection: 'Connexion',
    expression: 'Expression',
    intuition: 'Intuition',
    crown: 'Couronne',
    earth: 'Terre',
    gamma: 'Gamma',
    cosmicOm: 'Om Cosmique',
    verdiA: 'Verdi A',
    deepSleep: 'Sommeil profond',
    meditation: 'Méditation',
    relaxation: 'Relaxation',
    focus: 'Concentration',
    peakAwareness: 'Pleine conscience',
    healingPad: 'Pad Guérisseur',
    pureSine: 'Sinus Pur',
    warmString: 'Corde Chaude',
    templeDrone: 'Bourdon du Temple',
    deepOm: 'Om Profond',
    customHz: 'Hz Personnalisé',
    set: 'Déf.',
    binauralEntrainment: 'Entraînement Binaural',
    createSequence: 'Créer une séquence',
    remaining: 'restant',
    frequenciesCount: 'fréquences',
    buildSequence: 'Construire une séquence',
    sequence: 'Séquence',
    total: 'total',
    autoDistributeTime: 'Distribution auto.',
    minutesTotal: 'minutes au total',
    distribute: 'Distribuer',
    secPerFrequency: 'sec par fréquence',
    seconds: 'secondes',
    sec: 'sec',
    addToSequence: 'Ajouter à la séquence',
    startSequence: 'Lancer la séquence',
    addFrequenciesToSequence: 'Ajoutez des fréquences',
    solfeggio: 'Solfège',
    rose: 'Rose',
    special: 'Spécial',
    microphoneInput: 'Entrée Micro',
    tapToExpand: 'Toucher pour agrandir',
    enableMicrophone: 'Activer le micro',
    inputDevice: 'Périphérique d\'entrée',
    gain: 'Gain',
    language: 'Langue',
  },
  de: {
    appSettings: 'Einstellungen',
    defaultSessionLength: 'Standard-Sitzungslänge',
    minutes: 'Minuten',
    save: 'Speichern',
    defaultTone: 'Standard-Ton',
    defaultStartFrequency: 'Standard-START-Frequenz',
    hz: 'Hz',
    selectFromPresets: 'Aus Vorlagen wählen',
    addCustomFrequency: 'Eigene Frequenz hinzufügen',
    label: 'Bezeichnung',
    add: 'Hinzufügen',
    binauralAlwaysOn: 'Binaural immer an',
    visualizerStyle: 'Visualisierungsstil',
    cymaticRing: 'Kymatischer Ring',
    classicWaveform: 'Klassische Wellenform',
    lissajousCurve: 'Lissajous-Kurve',
    visualizerColor: 'Visualisierungsfarbe',
    closeSettings: 'Schließen',
    binaural: 'BINAURAL',
    initializing: 'Initialisiere...',
    startSession: 'Sitzung starten',
    settings: 'Einstellungen',
    frequencies: 'Frequenzen',
    tone: 'Ton',
    sessionTimer: 'Sitzungstimer',
    enableTimer: 'Timer aktivieren',
    customMinutes: 'Eigene Minuten',
    sequenceBuilder: 'Sequenz-Editor',
    loadTemplate: 'Vorlage laden...',
    saveAsTemplate: 'Als Vorlage speichern',
    nameRequired: 'Name (erforderlich)',
    descriptionOptional: 'Beschreibung (optional)',
    cancel: 'Abbrechen',
    hide: 'Ausblenden ↓',
    painRelief: 'Schmerzlinderung',
    healing: 'Heilung',
    liberation: 'Befreiung',
    change: 'Wandel',
    miracles: 'Wunder',
    connection: 'Verbindung',
    expression: 'Ausdruck',
    intuition: 'Intuition',
    crown: 'Krone',
    earth: 'Erde',
    gamma: 'Gamma',
    cosmicOm: 'Kosmisches Om',
    verdiA: 'Verdi A',
    deepSleep: 'Tiefschlaf',
    meditation: 'Meditation',
    relaxation: 'Entspannung',
    focus: 'Fokus',
    peakAwareness: 'Höchstbewusstsein',
    healingPad: 'Heilendes Pad',
    pureSine: 'Reiner Sinus',
    warmString: 'Warme Saite',
    templeDrone: 'Tempel-Dron',
    deepOm: 'Tiefes Om',
    customHz: 'Eigene Hz',
    set: 'Setzen',
    binauralEntrainment: 'Binaurale Mitnahme',
    createSequence: 'Sequenz erstellen',
    remaining: 'verbleibend',
    frequenciesCount: 'Frequenzen',
    buildSequence: 'Sequenz bauen',
    sequence: 'Sequenz',
    total: 'gesamt',
    autoDistributeTime: 'Zeit auto. verteilen',
    minutesTotal: 'Minuten gesamt',
    distribute: 'Verteilen',
    secPerFrequency: 'Sek. pro Frequenz',
    seconds: 'Sekunden',
    sec: 'Sek.',
    addToSequence: 'Zur Sequenz hinzufügen',
    startSequence: 'Sequenz starten',
    addFrequenciesToSequence: 'Frequenzen hinzufügen',
    solfeggio: 'Solfeggio',
    rose: 'Rose',
    special: 'Spezial',
    microphoneInput: 'Mikrofon-Eingang',
    tapToExpand: 'Tippen zum Erweitern',
    enableMicrophone: 'Mikrofon aktivieren',
    inputDevice: 'Eingabegerät',
    gain: 'Verstärkung',
    language: 'Sprache',
  },
  pl: {
    appSettings: 'Ustawienia aplikacji',
    defaultSessionLength: 'Domyślna długość sesji',
    minutes: 'Minuty',
    save: 'Zapisz',
    defaultTone: 'Domyślny ton',
    defaultStartFrequency: 'Domyślna częstotliwość START',
    hz: 'Hz',
    selectFromPresets: 'Wybierz z ustawień',
    addCustomFrequency: 'Dodaj niestandardową częstotliwość',
    label: 'Etykieta',
    add: 'Dodaj',
    binauralAlwaysOn: 'Dudnienia różnicowe zawsze włączone',
    visualizerStyle: 'Styl wizualizacji',
    cymaticRing: 'Pierścień cymatyczny',
    classicWaveform: 'Klasyczna fala',
    lissajousCurve: 'Krzywa Lissajous',
    visualizerColor: 'Kolor wizualizacji',
    closeSettings: 'Zamknij ustawienia',
    binaural: 'BINAURALNE',
    initializing: 'Inicjalizacja...',
    startSession: 'Rozpocznij sesję',
    settings: 'Ustawienia',
    frequencies: 'Częstotliwości',
    tone: 'Ton',
    sessionTimer: 'Minutnik sesji',
    enableTimer: 'Włącz minutnik',
    customMinutes: 'Niestandardowe minuty',
    sequenceBuilder: 'Kreator sekwencji',
    loadTemplate: 'Wczytaj szablon...',
    saveAsTemplate: 'Zapisz jako szablon',
    nameRequired: 'Nazwa (wymagane)',
    descriptionOptional: 'Opis (opcjonalne)',
    cancel: 'Anuluj',
    hide: 'Ukryj ↓',
    painRelief: 'Ulga w bólu',
    healing: 'Uzdrawianie',
    liberation: 'Wyzwolenie',
    change: 'Zmiana',
    miracles: 'Cuda',
    connection: 'Połączenie',
    expression: 'Ekspresja',
    intuition: 'Intuicja',
    crown: 'Korona',
    earth: 'Ziemia',
    gamma: 'Gamma',
    cosmicOm: 'Kosmiczne Om',
    verdiA: 'Verdi A',
    deepSleep: 'Głęboki sen',
    meditation: 'Medytacja',
    relaxation: 'Relaksacja',
    focus: 'Skupienie',
    peakAwareness: 'Szczytowa świadomość',
    healingPad: 'Uzdrawiający Pad',
    pureSine: 'Czysta sinusoida',
    warmString: 'Ciepła struna',
    templeDrone: 'Świątynny Dron',
    deepOm: 'Głębokie Om',
    customHz: 'Własne Hz',
    set: 'Ustaw',
    binauralEntrainment: 'Dudnienia różnicowe',
    createSequence: 'Utwórz sekwencję',
    remaining: 'pozostało',
    frequenciesCount: 'częstotliwości',
    buildSequence: 'Zbuduj sekwencję',
    sequence: 'Sekwencja',
    total: 'łącznie',
    autoDistributeTime: 'Rozdziel czas automatycznie',
    minutesTotal: 'minut łącznie',
    distribute: 'Rozdziel',
    secPerFrequency: 'sek na częstotliwość',
    seconds: 'sekundy',
    sec: 'sek',
    addToSequence: 'Dodaj do sekwencji',
    startSequence: 'Rozpocznij sekwencję',
    addFrequenciesToSequence: 'Dodaj częstotliwości do sekwencji',
    solfeggio: 'Solfeggio',
    rose: 'Rose',
    special: 'Specjalne',
    microphoneInput: 'Wejście mikrofonowe',
    tapToExpand: 'Dotknij, aby rozwinąć',
    enableMicrophone: 'Włącz mikrofon',
    inputDevice: 'Urządzenie wejściowe',
    gain: 'Wzmocnienie',
    language: 'Język',
  },
  no: {
    appSettings: 'Appinnstillinger',
    defaultSessionLength: 'Standard øktlengde',
    minutes: 'Minutter',
    save: 'Lagre',
    defaultTone: 'Standard tone',
    defaultStartFrequency: 'Standard START-frekvens',
    hz: 'Hz',
    selectFromPresets: 'Velg fra forhåndsinnstillinger',
    addCustomFrequency: 'Legg til egendefinert frekvens',
    label: 'Merkelapp',
    add: 'Legg til',
    binauralAlwaysOn: 'Binaural alltid på',
    visualizerStyle: 'Visualiseringsstil',
    cymaticRing: 'Cymatisk ring',
    classicWaveform: 'Klassisk bølgeform',
    lissajousCurve: 'Lissajous-kurve',
    visualizerColor: 'Visualiseringsfarge',
    closeSettings: 'Lukk innstillinger',
    binaural: 'BINAURAL',
    initializing: 'Initialiserer...',
    startSession: 'Start økt',
    settings: 'Innstillinger',
    frequencies: 'Frekvenser',
    tone: 'Tone',
    sessionTimer: 'Økttidtaker',
    enableTimer: 'Aktiver tidtaker',
    customMinutes: 'Egendefinerte minutter',
    sequenceBuilder: 'Sekvensbygger',
    loadTemplate: 'Last mal...',
    saveAsTemplate: 'Lagre som mal',
    nameRequired: 'Navn (påkrevd)',
    descriptionOptional: 'Beskrivelse (valgfritt)',
    cancel: 'Avbryt',
    hide: 'Skjul ↓',
    painRelief: 'Smertelindring',
    healing: 'Helbredelse',
    liberation: 'Frigjøring',
    change: 'Endring',
    miracles: 'Mirakler',
    connection: 'Tilkobling',
    expression: 'Uttrykk',
    intuition: 'Intuisjon',
    crown: 'Krone',
    earth: 'Jorden',
    gamma: 'Gamma',
    cosmicOm: 'Kosmisk Om',
    verdiA: 'Verdi A',
    deepSleep: 'Dyp søvn',
    meditation: 'Meditasjon',
    relaxation: 'Avslapning',
    focus: 'Fokus',
    peakAwareness: 'Høy bevissthet',
    healingPad: 'Helbredende Pad',
    pureSine: 'Ren Sinus',
    warmString: 'Varm Streng',
    templeDrone: 'Tempeldure',
    deepOm: 'Dyp Om',
    customHz: 'Egen Hz',
    set: 'Sett',
    binauralEntrainment: 'Binaural medriving',
    createSequence: 'Lag en sekvens',
    remaining: 'gjenstår',
    frequenciesCount: 'frekvenser',
    buildSequence: 'Bygg en sekvens',
    sequence: 'Sekvens',
    total: 'totalt',
    autoDistributeTime: 'Fordel tid automatisk',
    minutesTotal: 'minutter totalt',
    distribute: 'Fordel',
    secPerFrequency: 'sek per frekvens',
    seconds: 'sekunder',
    sec: 'sek',
    addToSequence: 'Legg til i sekvens',
    startSequence: 'Start sekvens',
    addFrequenciesToSequence: 'Legg til frekvenser i sekvensen',
    solfeggio: 'Solfeggio',
    rose: 'Rose',
    special: 'Spesiell',
    microphoneInput: 'Mikrofoninngang',
    tapToExpand: 'Trykk for å utvide',
    enableMicrophone: 'Aktiver mikrofon',
    inputDevice: 'Inngangsenhet',
    gain: 'Gain',
    language: 'Språk',
  },
  ja: {
    appSettings: 'アプリ設定',
    defaultSessionLength: 'デフォルトのセッション時間',
    minutes: '分',
    save: '保存',
    defaultTone: 'デフォルトのトーン',
    defaultStartFrequency: 'デフォルトの開始周波数',
    hz: 'Hz',
    selectFromPresets: 'プリセットから選択',
    addCustomFrequency: 'カスタム周波数を追加',
    label: 'ラベル',
    add: '追加',
    binauralAlwaysOn: 'バイノーラル常時オン',
    visualizerStyle: 'ビジュアライザースタイル',
    cymaticRing: 'サイマティックリング',
    classicWaveform: 'クラシック波形',
    lissajousCurve: 'リサージュ曲線',
    visualizerColor: 'ビジュアライザーの色',
    closeSettings: '設定を閉じる',
    binaural: 'バイノーラル',
    initializing: '初期化中...',
    startSession: 'セッション開始',
    settings: '設定',
    frequencies: '周波数',
    tone: 'トーン',
    sessionTimer: 'セッションタイマー',
    enableTimer: 'タイマーを有効化',
    customMinutes: 'カスタム時間（分）',
    sequenceBuilder: 'シーケンスビルダー',
    loadTemplate: 'テンプレートを読み込む...',
    saveAsTemplate: 'テンプレートとして保存',
    nameRequired: '名前（必須）',
    descriptionOptional: '説明（オプション）',
    cancel: 'キャンセル',
    hide: '隠す ↓',
    painRelief: '鎮痛',
    healing: '癒し',
    liberation: '解放',
    change: '変化',
    miracles: '奇跡',
    connection: 'つながり',
    expression: '表現',
    intuition: '直感',
    crown: '頭頂',
    earth: '地球',
    gamma: 'ガンマ',
    cosmicOm: 'コズミック・オーム',
    verdiA: 'ヴェルディのA',
    deepSleep: '深い眠り',
    meditation: '瞑想',
    relaxation: 'リラクゼーション',
    focus: '集中',
    peakAwareness: '覚醒',
    healingPad: 'ヒーリングパッド',
    pureSine: '純粋なサイン波',
    warmString: 'ウォームストリング',
    templeDrone: 'テンプルドローン',
    deepOm: 'ディープ・オーム',
    customHz: 'カスタム Hz',
    set: '設定',
    binauralEntrainment: 'バイノーラル・エントレインメント',
    createSequence: 'シーケンスを作成',
    remaining: '残り',
    frequenciesCount: '周波数',
    buildSequence: 'シーケンスを構築',
    sequence: 'シーケンス',
    total: '合計',
    autoDistributeTime: '時間を自動配分',
    minutesTotal: '分（合計）',
    distribute: '配分',
    secPerFrequency: '秒/周波数',
    seconds: '秒',
    sec: '秒',
    addToSequence: 'シーケンスに追加',
    startSequence: 'シーケンス開始',
    addFrequenciesToSequence: 'シーケンスに周波数を追加',
    solfeggio: 'ソルフェジオ',
    rose: 'ローズ',
    special: 'スペシャル',
    microphoneInput: 'マイク入力',
    tapToExpand: 'タップして展開',
    enableMicrophone: 'マイクを有効化',
    inputDevice: '入力デバイス',
    gain: 'ゲイン',
    language: '言語',
  },
};

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: TranslationKey) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguage] = useState<Language>('en');

  useEffect(() => {
    const savedLang = localStorage.getItem('meditation-app-language') as Language;
    if (savedLang && translations[savedLang]) {
      setLanguage(savedLang);
    }
  }, []);

  const handleSetLanguage = (lang: Language) => {
    setLanguage(lang);
    localStorage.setItem('meditation-app-language', lang);
  };

  const t = (key: TranslationKey) => {
    return translations[language][key] || translations['en'][key] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage: handleSetLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
}
